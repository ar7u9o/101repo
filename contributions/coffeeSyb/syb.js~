// Generated by CoffeeScript 1.3.3
(function() {
  var add, c, company, cut, cutE, everything, everywhere, gmapQ, gmapT, mkQ, mkT, research, total, totalE;

  gmapQ = function(f, val) {
    var k, v, _results;
    if (typeof val === 'number' || typeof val === 'string') {
      return [];
    } else {
      _results = [];
      for (k in val) {
        v = val[k];
        _results.push(f(v));
      }
      return _results;
    }
  };

  everything = function(r, f) {
    return function(x) {
      var result;
      result = gmapQ(everything(r, f), x);
      result.push(f(x));
      return result.reduce(r);
    };
  };

  mkQ = function(base, specific) {
    return function(x) {
      try {
        return specific(x);
      } catch (error) {
        return base;
      }
    };
  };

  mkT = function(f) {
    return function(val) {
      try {
        return f(val);
      } catch (error) {
        return val;
      }
    };
  };

  gmapT = function(f, val) {
    var key, value;
    if (typeof val === 'number' || typeof val === 'string') {
      return val;
    } else {
      val = copy(val);
      for (key in val) {
        value = val[key];
        val[key] = f(value);
      }
      return val;
    }
  };

  mkT = function(f) {
    return function(x) {
      try {
        return f(x);
      } catch (error) {
        return x;
      }
    };
  };

  everywhere = function(f) {
    return function(x) {
      return f(gmapT(everywhere(f), x));
    };
  };

  research = {
    name: "Research",
    depts: [
      {
        name: "Ralf",
        salary: 123456.0
      }
    ]
  };

  company = {
    name: "Meganalysis",
    depts: [research]
  };

  cutE = function(_arg) {
    var name, salary;
    name = _arg.name, salary = _arg.salary;
    if ((salary != null) && (name != null)) {
      return {
        name: name,
        salary: salary / 2
      };
    } else {
      throw "fail";
    }
  };

  totalE = function(_arg) {
    var name, salary;
    name = _arg.name, salary = _arg.salary;
    if ((salary != null) && (name != null)) {
      return salary;
    } else {
      throw "fail";
    }
  };

  add = function(a, b) {
    return a + b;
  };

  total = everything(add, mkQ(0, totalE));

  cut = everywhere(mkT(cutE));

  console.log(total(company));

  c = cut(company);

  console.log(total(c));

}).call(this);
